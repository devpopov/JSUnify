(function(e,t){"use strict";typeof define=="function"&&define.amd?define(["exports"],t):typeof exports!="undefined"?t(exports):t(e.esprima={})})(this,function(e){"use strict";function y(e,t){if(!e)throw new Error("ASSERT: "+t)}function b(e,t){return a.slice(e,t)}function w(e){return"0123456789".indexOf(e)>=0}function E(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function S(e){return"01234567".indexOf(e)>=0}function x(e){return e===" "||e==="	"||e===""||e==="\f"||e===" "||e.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(e)>=0}function T(e){return e==="\n"||e==="\r"||e==="\u2028"||e==="\u2029"}function N(e){return e==="$"||e==="_"||e==="\\"||e>="a"&&e<="z"||e>="A"&&e<="Z"||e.charCodeAt(0)>=128&&o.NonAsciiIdentifierStart.test(e)}function C(e){return e==="$"||e==="_"||e==="\\"||e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e.charCodeAt(0)>=128&&o.NonAsciiIdentifierPart.test(e)}function k(e){return["class","enum","export","extends","import","super"].indexOf(e)>=0}function L(e){return["implements","interface","package","private","protected","public","static","yield","let"].indexOf(e)>=0}function A(e){return e==="eval"||e==="arguments"}function O(e){if(f&&L(e))return!0;switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}}function M(){var e,t,n;t=!1,n=!1;while(l<p){e=a[l];if(n)e=a[l++],T(e)&&(n=!1,e==="\r"&&a[l]==="\n"&&++l,++c,h=l);else if(t)T(e)?(e==="\r"&&a[l+1]==="\n"&&++l,++c,++l,h=l,l>=p&&z({},s.UnexpectedToken,"ILLEGAL")):(e=a[l++],l>=p&&z({},s.UnexpectedToken,"ILLEGAL"),e==="*"&&(e=a[l],e==="/"&&(++l,t=!1)));else if(e==="/"){e=a[l+1];if(e==="/")l+=2,n=!0;else{if(e!=="*")break;l+=2,t=!0,l>=p&&z({},s.UnexpectedToken,"ILLEGAL")}}else if(x(e))++l;else{if(!T(e))break;++l,e==="\r"&&a[l]==="\n"&&++l,++c,h=l}}}function _(e){var t,n,r,i=0;n=e==="u"?4:2;for(t=0;t<n;++t){if(!(l<p&&E(a[l])))return"";r=a[l++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function D(){var e,n,r,i,o;e=a[l],N(e)||z({},s.UnexpectedToken,"ILLEGAL"),n=l++,r=e,e==="\\"&&(a[l]!=="u"&&z({},s.UnexpectedToken,"ILLEGAL"),++l,i=l,e=_("u"),e?((e==="\\"||!N(e))&&z({},s.UnexpectedToken,"ILLEGAL"),r=e):(l=i,r="u"));while(l<p){e=a[l];if(!C(e))break;++l,r+=e,e==="\\"&&(r=r.substr(0,r.length-1),a[l]!=="u"&&z({},s.UnexpectedToken,"ILLEGAL"),++l,i=l,e=_("u"),e?((e==="\\"||!C(e))&&z({},s.UnexpectedToken,"ILLEGAL"),r+=e):(l=i,r+="u"))}return r.length===1?o=t.Identifier:O(r)?o=t.Keyword:r==="null"?o=t.NullLiteral:r==="true"||r==="false"?o=t.BooleanLiteral:o=t.Identifier,{type:o,value:r,lineNumber:c,lineStart:h,range:[n,l]}}function P(){var e=l,n=a[l],r,i,o;if(n==="."||n==="("||n===")"||n===";"||n===","||n==="{"||n==="}"||n==="["||n==="]"||n===":"||n==="?"||n==="~")return++l,{type:t.Punctuator,value:n,lineNumber:c,lineStart:h,range:[e,l]};r=a[l+1],i=a[l+2],o=a[l+3];if(n===">"&&r===">"&&i===">"&&o==="=")return l+=4,{type:t.Punctuator,value:">>>=",lineNumber:c,lineStart:h,range:[e,l]};if(n==="="&&r==="="&&i==="=")return l+=3,{type:t.Punctuator,value:"===",lineNumber:c,lineStart:h,range:[e,l]};if(n==="!"&&r==="="&&i==="=")return l+=3,{type:t.Punctuator,value:"!==",lineNumber:c,lineStart:h,range:[e,l]};if(n===">"&&r===">"&&i===">")return l+=3,{type:t.Punctuator,value:">>>",lineNumber:c,lineStart:h,range:[e,l]};if(n==="<"&&r==="<"&&i==="=")return l+=3,{type:t.Punctuator,value:"<<=",lineNumber:c,lineStart:h,range:[e,l]};if(n===">"&&r===">"&&i==="=")return l+=3,{type:t.Punctuator,value:">>=",lineNumber:c,lineStart:h,range:[e,l]};if(n===r&&"+-<>&|".indexOf(n)>=0&&"+-<>&|".indexOf(r)>=0)return l+=2,{type:t.Punctuator,value:n+r,lineNumber:c,lineStart:h,range:[e,l]};if("<>=!+-*%&|^/".indexOf(n)>=0)return++l,r==="="&&(++l,n+=r),{type:t.Punctuator,value:n,lineNumber:c,lineStart:h,range:[e,l]};z({},s.UnexpectedToken,"ILLEGAL")}function H(){var e,n,r;r=a[l],y(w(r)||r===".","Numeric literal must start with a decimal digit or a decimal point"),n=l,e="";if(r!=="."){e=a[l++],r=a[l];if(e==="0"){if(r==="x"||r==="X"){e+=a[l++];while(l<p){r=a[l];if(!E(r))break;e+=a[l++]}return e.length<=2&&z({},s.UnexpectedToken,"ILLEGAL"),l<p&&(r=a[l],N(r)&&z({},s.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseInt(e,16),lineNumber:c,lineStart:h,range:[n,l]}}if(S(r)){e+=a[l++];while(l<p){r=a[l];if(!S(r))break;e+=a[l++]}return l<p&&(r=a[l],(N(r)||w(r))&&z({},s.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:c,lineStart:h,range:[n,l]}}w(r)&&z({},s.UnexpectedToken,"ILLEGAL")}while(l<p){r=a[l];if(!w(r))break;e+=a[l++]}}if(r==="."){e+=a[l++];while(l<p){r=a[l];if(!w(r))break;e+=a[l++]}}if(r==="e"||r==="E"){e+=a[l++],r=a[l];if(r==="+"||r==="-")e+=a[l++];r=a[l];if(w(r)){e+=a[l++];while(l<p){r=a[l];if(!w(r))break;e+=a[l++]}}else r="character "+r,l>=p&&(r="<end>"),z({},s.UnexpectedToken,"ILLEGAL")}return l<p&&(r=a[l],N(r)&&z({},s.UnexpectedToken,"ILLEGAL")),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:c,lineStart:h,range:[n,l]}}function B(){var e="",n,r,i,o,u,f,d=!1;n=a[l],y(n==="'"||n==='"',"String literal must starts with a quote"),r=l,++l;while(l<p){i=a[l++];if(i===n){n="";break}if(i==="\\"){i=a[l++];if(!T(i))switch(i){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":case"x":f=l,u=_(i),u?e+=u:(l=f,e+=i);break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:S(i)?(o="01234567".indexOf(i),o!==0&&(d=!0),l<p&&S(a[l])&&(d=!0,o=o*8+"01234567".indexOf(a[l++]),"0123".indexOf(i)>=0&&l<p&&S(a[l])&&(o=o*8+"01234567".indexOf(a[l++]))),e+=String.fromCharCode(o)):e+=i}else++c,i==="\r"&&a[l]==="\n"&&++l}else{if(T(i))break;e+=i}}return n!==""&&z({},s.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:e,octal:d,lineNumber:c,lineStart:h,range:[r,l]}}function j(){var e,t,n,r,i,o,u=!1,f,c=!1;v=null,M(),n=l,t=a[l],y(t==="/","Regular expression literal must start with a slash"),e=a[l++];while(l<p){t=a[l++],e+=t;if(u)t==="]"&&(u=!1);else if(t==="\\")t=a[l++],T(t)&&z({},s.UnterminatedRegExp),e+=t;else{if(t==="/"){c=!0;break}t==="["?u=!0:T(t)&&z({},s.UnterminatedRegExp)}}c||z({},s.UnterminatedRegExp),r=e.substr(1,e.length-2),i="";while(l<p){t=a[l];if(!C(t))break;++l;if(t==="\\"&&l<p){t=a[l];if(t==="u"){++l,f=l,t=_("u");if(t){i+=t;for(e+="\\u";f<l;++f)e+=a[f]}else l=f,i+="u",e+="\\u"}else e+="\\"}else i+=t,e+=t}try{o=new RegExp(r,i)}catch(h){z({},s.InvalidRegExp)}return R(),{literal:e,value:o,range:[n,l]}}function F(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function I(){var e;return M(),l>=p?{type:t.EOF,lineNumber:c,lineStart:h,range:[l,l]}:(e=a[l],N(e)?D():e==="."?w(a[l+1])?H():P():e==="'"||e==='"'?B():w(e)?H():P())}function q(){var e;return e=v,l=e.range[1],c=e.lineNumber,h=e.lineStart,v=I(),l=e.range[1],c=e.lineNumber,h=e.lineStart,e}function R(){var e,t,n;e=l,t=c,n=h,v=I(),l=e,c=t,h=n}function U(){var e,t,n,r;return e=l,t=c,n=h,M(),r=c!==t,l=e,c=t,h=n,r}function z(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return r[t]||""});throw typeof e.lineNumber=="number"?(n=new Error("Line "+e.lineNumber+": "+i),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-h+1):(n=new Error("Line "+c+": "+i),n.index=l,n.lineNumber=c,n.column=l-h+1),n}function W(){try{z.apply(null,arguments)}catch(e){if(!g.errors)throw e;g.errors.push(e)}}function X(e){e.type===t.EOF&&z(e,s.UnexpectedEOS),e.type===t.NumericLiteral&&z(e,s.UnexpectedNumber),e.type===t.StringLiteral&&z(e,s.UnexpectedString),e.type===t.Identifier&&z(e,s.UnexpectedIdentifier);if(e.type===t.Keyword){if(k(e.value))z(e,s.UnexpectedReserved);else if(f&&L(e.value)){W(e,s.StrictReservedWord);return}z(e,s.UnexpectedToken,e.value)}z(e,s.UnexpectedToken,e.value)}function V(e){var n=q();(n.type!==t.Punctuator||n.value!==e)&&X(n)}function $(e){var n=q();(n.type!==t.Keyword||n.value!==e)&&X(n)}function J(e){return v.type===t.Punctuator&&v.value===e}function K(e){return v.type===t.Keyword&&v.value===e}function Q(){var e;return v.type!==t.Punctuator?!1:(e=v.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function G(){var e;if(a[l]===";"){q();return}e=c,M();if(c!==e)return;if(J(";")){q();return}v.type!==t.EOF&&!J("}")&&X(v)}function Y(e){return e.type===r.Identifier||e.type===r.MemberExpression}function Z(){var e=[];V("[");while(!J("]"))J(",")?(q(),e.push(null)):(e.push(bt()),J("]")||V(","));return V("]"),d.createArrayExpression(e)}function et(e,t){var n,r;return n=f,r=Vt(),t&&f&&A(e[0].name)&&W(t,s.StrictParamName),f=n,d.createFunctionExpression(null,e,[],r)}function tt(){var e=q();return e.type===t.StringLiteral||e.type===t.NumericLiteral?(f&&e.octal&&W(e,s.StrictOctalLiteral),d.createLiteral(e)):d.createIdentifier(e.value)}function nt(){var e,n,r,i,s;e=v;if(e.type===t.Identifier)return r=tt(),e.value==="get"&&!J(":")?(n=tt(),V("("),V(")"),i=et([]),d.createProperty("get",n,i)):e.value==="set"&&!J(":")?(n=tt(),V("("),e=v,e.type!==t.Identifier&&X(q()),s=[xt()],V(")"),i=et(s,e),d.createProperty("set",n,i)):(V(":"),i=bt(),d.createProperty("init",r,i));if(e.type!==t.EOF&&e.type!==t.Punctuator)return n=tt(),V(":"),i=bt(),d.createProperty("init",n,i);X(e)}function rt(){var e=[],t,n,o,u={},a=String;V("{");while(!J("}"))t=nt(),t.key.type===r.Identifier?n=t.key.name:n=a(t.key.value),o=t.kind==="init"?i.Data:t.kind==="get"?i.Get:i.Set,Object.prototype.hasOwnProperty.call(u,n)?(u[n]===i.Data?f&&o===i.Data?W({},s.StrictDuplicateProperty):o!==i.Data&&W({},s.AccessorDataProperty):o===i.Data?W({},s.AccessorDataProperty):u[n]&o&&W({},s.AccessorGetSet),u[n]|=o):u[n]=o,e.push(t),J("}")||V(",");return V("}"),d.createObjectExpression(e)}function it(){var e;return V("("),e=wt(),V(")"),e}function st(){var e,n;e=v.type;if(e===t.Identifier)return d.createIdentifier(q().value);if(e===t.StringLiteral||e===t.NumericLiteral)return f&&v.octal&&W(v,s.StrictOctalLiteral),d.createLiteral(q());if(e===t.Keyword){if(K("this"))return q(),d.createThisExpression();if(K("function"))return Kt()}return e===t.BooleanLiteral?(n=q(),n.value=n.value==="true",d.createLiteral(n)):e===t.NullLiteral?(n=q(),n.value=null,d.createLiteral(n)):J("[")?Z():J("{")?rt():J("(")?it():J("/")||J("/=")?d.createLiteral(j()):X(q())}function ot(){var e=[];V("(");if(!J(")"))while(l<p){e.push(bt());if(J(")"))break;V(",")}return V(")"),e}function ut(){var e=q();return F(e)||X(e),d.createIdentifier(e.value)}function at(){return V("."),ut()}function ft(){var e;return V("["),e=wt(),V("]"),e}function lt(){var e,t;return $("new"),e=ht(),t=J("(")?ot():[],d.createNewExpression(e,t)}function ct(){var e,t,n;e=K("new")?lt():st();while(J(".")||J("[")||J("("))J("(")?(t=ot(),e=d.createCallExpression(e,t)):J("[")?(n=ft(),e=d.createMemberExpression("[",e,n)):(n=at(),e=d.createMemberExpression(".",e,n));return e}function ht(){var e,t;e=K("new")?lt():st();while(J(".")||J("["))J("[")?(t=ft(),e=d.createMemberExpression("[",e,t)):(t=at(),e=d.createMemberExpression(".",e,t));return e}function pt(){var e=ct(),n;return v.type!==t.Punctuator?e:((J("++")||J("--"))&&!U()&&(f&&e.type===r.Identifier&&A(e.name)&&W({},s.StrictLHSPostfix),Y(e)||z({},s.InvalidLHSInAssignment),n=q(),e=d.createPostfixExpression(n.value,e)),e)}function dt(){var e,n;return v.type!==t.Punctuator&&v.type!==t.Keyword?pt():J("++")||J("--")?(e=q(),n=dt(),f&&n.type===r.Identifier&&A(n.name)&&W({},s.StrictLHSPrefix),Y(n)||z({},s.InvalidLHSInAssignment),d.createUnaryExpression(e.value,n)):J("+")||J("-")||J("~")||J("!")?(e=q(),n=dt(),d.createUnaryExpression(e.value,n)):K("delete")||K("void")||K("typeof")?(e=q(),n=dt(),n=d.createUnaryExpression(e.value,n),f&&n.operator==="delete"&&n.argument.type===r.Identifier&&W({},s.StrictDelete),n):pt()}function vt(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:}return r}function mt(e){var t=e.pop(),n=e.pop().value,r=e.pop();n==="||"||n==="&&"?e.push(d.createLogicalExpression(n,r,t)):e.push(d.createBinaryExpression(n,r,t))}function gt(){var e,t,n,r,i;r=m.allowIn,m.allowIn=!0,e=dt(),t=v,n=vt(t,r);if(n===0)return e;t.prec=n,q(),i=[e,t,dt()];while((n=vt(v,r))>0){while(i.length>2&&n<=i[i.length-2].prec)mt(i);t=q(),t.prec=n,i.push(t),i.push(dt())}while(i.length>1)mt(i);return m.allowIn=r,i[0]}function yt(){var e,t,n,r;return e=gt(),J("?")&&(q(),t=m.allowIn,m.allowIn=!0,n=bt(),m.allowIn=t,V(":"),r=bt(),e=d.createConditionalExpression(e,n,r)),e}function bt(){var e,t,n;return e=v,t=yt(),Q()?(Y(t)||z({},s.InvalidLHSInAssignment),f&&t.type===r.Identifier&&A(t.name)&&W(e,s.StrictLHSAssignment),e=q(),n=bt(),d.createAssignmentExpression(e.value,t,n)):t}function wt(){var e=bt();if(J(",")){e=d.createSequenceExpression([e]);while(l<p){if(!J(","))break;q(),e.expressions.push(bt())}}return e}function Et(){var e=[],t;while(l<p){if(J("}"))break;t=Qt();if(typeof t=="undefined")break;e.push(t)}return e}function St(){var e;return V("{"),e=Et(),V("}"),d.createBlockStatement(e)}function xt(){var e=q();return e.type!==t.Identifier&&X(e),d.createIdentifier(e.value)}function Tt(e){var t=xt(),n=null;return f&&A(t.name)&&W({},s.StrictVarName),e==="const"?(V("="),n=bt()):J("=")&&(q(),n=bt()),d.createVariableDeclarator(t,n)}function Nt(e){var t=[];while(l<p){t.push(Tt(e));if(!J(","))break;q()}return t}function Ct(){var e;return $("var"),e=Nt(),G(),d.createVariableDeclaration(e,"var")}function kt(e){var t;return $(e),t=Nt(e),G(),d.createVariableDeclaration(t,e)}function Lt(){return V(";"),d.createEmptyStatement()}function At(){var e=wt();return G(),d.createExpressionStatement(e)}function Ot(){var e,t,n;return $("if"),V("("),e=wt(),V(")"),t=Xt(),K("else")?(q(),n=Xt()):n=null,d.createIfStatement(e,t,n)}function Mt(){var e,t,n;return $("do"),n=m.inIteration,m.inIteration=!0,e=Xt(),m.inIteration=n,$("while"),V("("),t=wt(),V(")"),J(";")&&q(),d.createDoWhileStatement(e,t)}function _t(){var e,t,n;return $("while"),V("("),e=wt(),V(")"),n=m.inIteration,m.inIteration=!0,t=Xt(),m.inIteration=n,d.createWhileStatement(e,t)}function Dt(){var e=q(),t=Nt();return d.createVariableDeclaration(t,e.value)}function Pt(){var e,t,n,r,i,o,u;return e=t=n=null,$("for"),V("("),J(";")?q():(K("var")||K("let")?(m.allowIn=!1,e=Dt(),m.allowIn=!0,e.declarations.length===1&&K("in")&&(q(),r=e,i=wt(),e=null)):(m.allowIn=!1,e=wt(),m.allowIn=!0,K("in")&&(Y(e)||z({},s.InvalidLHSInForIn),q(),r=e,i=wt(),e=null)),typeof r=="undefined"&&V(";")),typeof r=="undefined"&&(J(";")||(t=wt()),V(";"),J(")")||(n=wt())),V(")"),u=m.inIteration,m.inIteration=!0,o=Xt(),m.inIteration=u,typeof r=="undefined"?d.createForStatement(e,t,n,o):d.createForInStatement(r,i,o)}function Ht(){var e=null;return $("continue"),a[l]===";"?(q(),m.inIteration||z({},s.IllegalContinue),d.createContinueStatement(null)):U()?(m.inIteration||z({},s.IllegalContinue),d.createContinueStatement(null)):(v.type===t.Identifier&&(e=xt(),Object.prototype.hasOwnProperty.call(m.labelSet,e.name)||z({},s.UnknownLabel,e.name)),G(),e===null&&!m.inIteration&&z({},s.IllegalContinue),d.createContinueStatement(e))}function Bt(){var e=null;return $("break"),a[l]===";"?(q(),!m.inIteration&&!m.inSwitch&&z({},s.IllegalBreak),d.createBreakStatement(null)):U()?(!m.inIteration&&!m.inSwitch&&z({},s.IllegalBreak),d.createBreakStatement(null)):(v.type===t.Identifier&&(e=xt(),Object.prototype.hasOwnProperty.call(m.labelSet,e.name)||z({},s.UnknownLabel,e.name)),G(),e===null&&!m.inIteration&&!m.inSwitch&&z({},s.IllegalBreak),d.createBreakStatement(e))}function jt(){var e=null;return $("return"),m.inFunctionBody||W({},s.IllegalReturn),a[l]===" "&&N(a[l+1])?(e=wt(),G(),d.createReturnStatement(e)):U()?d.createReturnStatement(null):(J(";")||!J("}")&&v.type!==t.EOF&&(e=wt()),G(),d.createReturnStatement(e))}function Ft(){var e,t;return f&&W({},s.StrictModeWith),$("with"),V("("),e=wt(),V(")"),t=Xt(),d.createWithStatement(e,t)}function It(){var e,t=[],n;K("default")?(q(),e=null):($("case"),e=wt()),V(":");while(l<p){if(J("}")||K("default")||K("case"))break;n=Xt();if(typeof n=="undefined")break;t.push(n)}return d.createSwitchCase(e,t)}function qt(){var e,t,n,r,i;$("switch"),V("("),e=wt(),V(")"),V("{");if(J("}"))return q(),d.createSwitchStatement(e);t=[],r=m.inSwitch,m.inSwitch=!0,i=!1;while(l<p){if(J("}"))break;n=It(),n.test===null&&(i&&z({},s.MultipleDefaultsInSwitch),i=!0),t.push(n)}return m.inSwitch=r,V("}"),d.createSwitchStatement(e,t)}function Rt(){var e;return $("throw"),U()&&z({},s.NewlineAfterThrow),e=wt(),G(),d.createThrowStatement(e)}function Ut(){var e,t;return $("catch"),V("("),J(")")||(e=wt(),f&&e.type===r.Identifier&&A(e.name)&&W({},s.StrictCatchVariable)),V(")"),t=St(),d.createCatchClause(e,t)}function zt(){var e,t=[],n=null;return $("try"),e=St(),K("catch")&&t.push(Ut()),K("finally")&&(q(),n=St()),t.length===0&&!n&&z({},s.NoCatchOrFinally),d.createTryStatement(e,[],t,n)}function Wt(){return $("debugger"),G(),d.createDebuggerStatement()}function Xt(){var e=v.type,n,i;e===t.EOF&&X(v);if(e===t.Punctuator)switch(v.value){case";":return Lt();case"{":return St();case"(":return At();default:}if(e===t.Keyword)switch(v.value){case"break":return Bt();case"continue":return Ht();case"debugger":return Wt();case"do":return Mt();case"for":return Pt();case"function":return Jt();case"if":return Ot();case"return":return jt();case"switch":return qt();case"throw":return Rt();case"try":return zt();case"var":return Ct();case"while":return _t();case"with":return Ft();default:}return n=wt(),n.type===r.Identifier&&J(":")?(q(),Object.prototype.hasOwnProperty.call(m.labelSet,n.name)&&z({},s.Redeclaration,"Label",n.name),m.labelSet[n.name]=!0,i=Xt(),delete m.labelSet[n.name],d.createLabeledStatement(n,i)):(G(),d.createExpressionStatement(n))}function Vt(){var e,n=[],i,o,u,a,c,h,g;V("{");while(l<p){if(v.type!==t.StringLiteral)break;i=v,e=Qt(),n.push(e);if(e.expression.type!==r.Literal)break;o=b(i.range[0]+1,i.range[1]-1),o==="use strict"?(f=!0,u&&W(u,s.StrictOctalLiteral)):!u&&i.octal&&(u=i)}a=m.labelSet,c=m.inIteration,h=m.inSwitch,g=m.inFunctionBody,m.labelSet={},m.inIteration=!1,m.inSwitch=!1,m.inFunctionBody=!0;while(l<p){if(J("}"))break;e=Qt();if(typeof e=="undefined")break;n.push(e)}return V("}"),m.labelSet=a,m.inIteration=c,m.inSwitch=h,m.inFunctionBody=g,d.createBlockStatement(n)}function $t(e){var t,n=[],r,i,o,u;V("(");if(!J(")")){o={};while(l<p){r=v,t=xt(),f?(A(r.value)&&(i=r,u=s.StrictParamName),Object.prototype.hasOwnProperty.call(o,r.value)&&(i=r,u=s.StrictParamDupe)):e||(A(r.value)?(e=r,u=s.StrictParamName):L(r.value)?(e=r,u=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(o,r.value)&&(e=r,u=s.StrictParamDupe)),n.push(t),o[t.name]=!0;if(J(")"))break;V(",")}}return V(")"),{params:n,stricted:i,firstRestricted:e,message:u}}function Jt(){var e,t=[],n,r,i,o,u,a,l;return $("function"),r=v,e=xt(),f?A(r.value)&&W(r,s.StrictFunctionName):A(r.value)?(u=r,a=s.StrictFunctionName):L(r.value)&&(u=r,a=s.StrictReservedWord),o=$t(u),t=o.params,i=o.stricted,u=o.firstRestricted,o.message&&(a=o.message),l=f,n=Vt(),f&&u&&z(u,a),f&&i&&W(i,a),f=l,d.createFunctionDeclaration(e,t,[],n)}function Kt(){var e,t=null,n,r,i,o,u=[],a,l;return $("function"),J("(")||(e=v,t=xt(),f?A(e.value)&&W(e,s.StrictFunctionName):A(e.value)?(r=e,i=s.StrictFunctionName):L(e.value)&&(r=e,i=s.StrictReservedWord)),o=$t(r),u=o.params,n=o.stricted,r=o.firstRestricted,o.message&&(i=o.message),l=f,a=Vt(),f&&r&&z(r,i),f&&n&&W(n,i),f=l,d.createFunctionExpression(t,u,[],a)}function Qt(){if(v.type===t.Keyword)switch(v.value){case"const":case"let":return kt(v.value);case"function":return Jt();default:return Xt()}if(v.type!==t.EOF)return Xt()}function Gt(){var e,n=[],i,o,u;while(l<p){i=v;if(i.type!==t.StringLiteral)break;e=Qt(),n.push(e);if(e.expression.type!==r.Literal)break;o=b(i.range[0]+1,i.range[1]-1),o==="use strict"?(f=!0,u&&W(u,s.StrictOctalLiteral)):!u&&i.octal&&(u=i)}while(l<p){e=Qt();if(typeof e=="undefined")break;n.push(e)}return n}function Yt(){var e;return f=!1,R(),e=Gt(),d.createProgram(e)}function Zt(e,t,n,r,i){y(typeof n=="number","Comment must have valid position");if(g.comments.length>0&&g.comments[g.comments.length-1].range[1]>n)return;g.comments.push({type:e,value:t,range:[n,r],loc:i})}function en(){var e,t,n,r,i,o;e="",i=!1,o=!1;while(l<p){t=a[l];if(o)t=a[l++],T(t)?(n.end={line:c,column:l-h-1},o=!1,Zt("Line",e,r,l-1,n),t==="\r"&&a[l]==="\n"&&++l,++c,h=l,e=""):l>=p?(o=!1,e+=t,n.end={line:c,column:p-h},Zt("Line",e,r,p,n)):e+=t;else if(i)T(t)?(t==="\r"&&a[l+1]==="\n"?(++l,e+="\r\n"):e+=t,++c,++l,h=l,l>=p&&z({},s.UnexpectedToken,"ILLEGAL")):(t=a[l++],l>=p&&z({},s.UnexpectedToken,"ILLEGAL"),e+=t,t==="*"&&(t=a[l],t==="/"&&(e=e.substr(0,e.length-1),i=!1,++l,n.end={line:c,column:l-h},Zt("Block",e,r,l,n),e="")));else if(t==="/"){t=a[l+1];if(t==="/")n={start:{line:c,column:l-h}},r=l,l+=2,o=!0,l>=p&&(n.end={line:c,column:l-h},o=!1,Zt("Line",e,r,l,n));else{if(t!=="*")break;r=l,l+=2,i=!0,n={start:{line:c,column:l-h-2}},l>=p&&z({},s.UnexpectedToken,"ILLEGAL")}}else if(x(t))++l;else{if(!T(t))break;++l,t==="\r"&&a[l]==="\n"&&++l,++c,h=l}}}function tn(){var e,t,n,r=[];for(e=0;e<g.comments.length;++e)t=g.comments[e],n={type:t.type,value:t.value},g.range&&(n.range=t.range),g.loc&&(n.loc=t.loc),r.push(n);g.comments=r}function nn(){var e,r,i,s,o;return M(),e=l,r={start:{line:c,column:l-h}},i=g.advance(),r.end={line:c,column:l-h},i.type!==t.EOF&&(s=[i.range[0],i.range[1]],o=b(i.range[0],i.range[1]),g.tokens.push({type:n[i.type],value:o,range:s,loc:r})),i}function rn(){var e,t,n,r;return M(),e=l,t={start:{line:c,column:l-h}},n=g.scanRegExp(),t.end={line:c,column:l-h},g.tokens.length>0&&(r=g.tokens[g.tokens.length-1],r.range[0]===e&&r.type==="Punctuator"&&(r.value==="/"||r.value==="/=")&&g.tokens.pop()),g.tokens.push({type:"RegularExpression",value:n.literal,range:[e,l],loc:t}),n}function sn(){var e,t,n,r=[];for(e=0;e<g.tokens.length;++e)t=g.tokens[e],n={type:t.type,value:t.value},g.range&&(n.range=t.range),g.loc&&(n.loc=t.loc),r.push(n);g.tokens=r}function on(){var e={};return e.range=[l,l],e.loc={start:{line:c,column:l-h},end:{line:c,column:l-h}},e.end=function(){this.range[1]=l,this.loc.end.line=c,this.loc.end.column=l-h},e.applyGroup=function(e){g.range&&(e.groupRange=[this.range[0],this.range[1]]),g.loc&&(e.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e.apply=function(e){g.range&&(e.range=[this.range[0],this.range[1]]),g.loc&&(e.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e}function un(){var e,t;return M(),e=on(),V("("),t=wt(),V(")"),e.end(),e.applyGroup(t),t}function an(){var e,t,n;M(),e=on(),t=K("new")?lt():st();while(J(".")||J("["))J("[")?(n=ft(),t=d.createMemberExpression("[",t,n),e.end(),e.apply(t)):(n=at(),t=d.createMemberExpression(".",t,n),e.end(),e.apply(t));return t}function fn(){var e,t,n,r;M(),e=on(),t=K("new")?lt():st();while(J(".")||J("[")||J("("))J("(")?(n=ot(),t=d.createCallExpression(t,n),e.end(),e.apply(t)):J("[")?(r=ft(),t=d.createMemberExpression("[",t,r),e.end(),e.apply(t)):(r=at(),t=d.createMemberExpression(".",t,r),e.end(),e.apply(t));return t}function ln(e){var t,n,r;t=Object.prototype.toString.apply(e)==="[object Array]"?[]:{};for(n in e)e.hasOwnProperty(n)&&n!=="groupRange"&&n!=="groupLoc"&&(r=e[n],r===null||typeof r!="object"||r instanceof RegExp?t[n]=r:t[n]=ln(r));return t}function cn(e,t){return function(n){function i(e){return e.type===r.LogicalExpression||e.type===r.BinaryExpression}function s(n){var r,o;i(n.left)&&s(n.left),i(n.right)&&s(n.right),e&&(n.left.groupRange||n.right.groupRange?(r=n.left.groupRange?n.left.groupRange[0]:n.left.range[0],o=n.right.groupRange?n.right.groupRange[1]:n.right.range[1],n.range=[r,o]):typeof n.range=="undefined"&&(r=n.left.range[0],o=n.right.range[1],n.range=[r,o])),t&&(n.left.groupLoc||n.right.groupLoc?(r=n.left.groupLoc?n.left.groupLoc.start:n.left.loc.start,o=n.right.groupLoc?n.right.groupLoc.end:n.right.loc.end,n.loc={start:r,end:o}):typeof n.loc=="undefined"&&(n.loc={start:n.left.loc.start,end:n.right.loc.end}))}return function(){var r,o;return M(),r=on(),o=n.apply(null,arguments),r.end(),e&&typeof o.range=="undefined"&&r.apply(o),t&&typeof o.loc=="undefined"&&r.apply(o),i(o)&&s(o),o}}}function hn(){var e;g.comments&&(g.skipComment=M,M=en);if(g.range||g.loc)g.parseGroupExpression=it,g.parseLeftHandSideExpression=ht,g.parseLeftHandSideExpressionAllowCall=ct,it=un,ht=an,ct=fn,e=cn(g.range,g.loc),g.parseAssignmentExpression=bt,g.parseBinaryExpression=gt,g.parseBlock=St,g.parseFunctionSourceElements=Vt,g.parseCatchClause=Ut,g.parseComputedMember=ft,g.parseConditionalExpression=yt,g.parseConstLetDeclaration=kt,g.parseExpression=wt,g.parseForVariableDeclaration=Dt,g.parseFunctionDeclaration=Jt,g.parseFunctionExpression=Kt,g.parseNewExpression=lt,g.parseNonComputedProperty=ut,g.parseObjectProperty=nt,g.parseObjectPropertyKey=tt,g.parsePostfixExpression=pt,g.parsePrimaryExpression=st,g.parseProgram=Yt,g.parsePropertyFunction=et,g.parseStatement=Xt,g.parseSwitchCase=It,g.parseUnaryExpression=dt,g.parseVariableDeclaration=Tt,g.parseVariableIdentifier=xt,bt=e(g.parseAssignmentExpression),gt=e(g.parseBinaryExpression),St=e(g.parseBlock),Vt=e(g.parseFunctionSourceElements),Ut=e(g.parseCatchClause),ft=e(g.parseComputedMember),yt=e(g.parseConditionalExpression),kt=e(g.parseConstLetDeclaration),wt=e(g.parseExpression),Dt=e(g.parseForVariableDeclaration),Jt=e(g.parseFunctionDeclaration),Kt=e(g.parseFunctionExpression),ht=e(ht),lt=e(g.parseNewExpression),ut=e(g.parseNonComputedProperty),nt=e(g.parseObjectProperty),tt=e(g.parseObjectPropertyKey),pt=e(g.parsePostfixExpression),st=e(g.parsePrimaryExpression),Yt=e(g.parseProgram),et=e(g.parsePropertyFunction),Xt=e(g.parseStatement),It=e(g.parseSwitchCase),dt=e(g.parseUnaryExpression),Tt=e(g.parseVariableDeclaration),xt=e(g.parseVariableIdentifier);typeof g.tokens!="undefined"&&(g.advance=I,g.scanRegExp=j,I=nn,j=rn)}function pn(){typeof g.skipComment=="function"&&(M=g.skipComment);if(g.range||g.loc)bt=g.parseAssignmentExpression,gt=g.parseBinaryExpression,St=g.parseBlock,Vt=g.parseFunctionSourceElements,Ut=g.parseCatchClause,ft=g.parseComputedMember,yt=g.parseConditionalExpression,kt=g.parseConstLetDeclaration,wt=g.parseExpression,Dt=g.parseForVariableDeclaration,Jt=g.parseFunctionDeclaration,Kt=g.parseFunctionExpression,it=g.parseGroupExpression,ht=g.parseLeftHandSideExpression,ct=g.parseLeftHandSideExpressionAllowCall,lt=g.parseNewExpression,ut=g.parseNonComputedProperty,nt=g.parseObjectProperty,tt=g.parseObjectPropertyKey,st=g.parsePrimaryExpression,pt=g.parsePostfixExpression,Yt=g.parseProgram,et=g.parsePropertyFunction,Xt=g.parseStatement,It=g.parseSwitchCase,dt=g.parseUnaryExpression,Tt=g.parseVariableDeclaration,xt=g.parseVariableIdentifier;typeof g.scanRegExp=="function"&&(I=g.advance,j=g.scanRegExp)}function dn(e){var t=e.length,n=[],r;for(r=0;r<t;++r)n[r]=e.charAt(r);return n}function vn(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function mn(e,t){var n,r;r=String,typeof e!="string"&&!(e instanceof String)&&(e=r(e)),d=u,a=e,l=0,c=a.length>0?1:0,h=0,p=a.length,v=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},g={},typeof t!="undefined"&&(g.range=typeof t.range=="boolean"&&t.range,g.loc=typeof t.loc=="boolean"&&t.loc,typeof t.tokens=="boolean"&&t.tokens&&(g.tokens=[]),typeof t.comment=="boolean"&&t.comment&&(g.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(g.errors=[])),p>0&&typeof a[0]=="undefined"&&(e instanceof String&&(a=e.valueOf()),typeof a[0]=="undefined"&&(a=dn(e))),hn();try{n=Yt(),typeof g.comments!="undefined"&&(tn(),n.comments=g.comments),typeof g.tokens!="undefined"&&(sn(),n.tokens=g.tokens),typeof g.errors!="undefined"&&(n.errors=g.errors);if(g.range||g.loc)n.body=ln(n.body)}catch(i){throw i}finally{pn(),g={}}return n}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},n={},n[t.BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",r={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},o={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},typeof "esprima"[0]=="undefined"&&(b=function(t,n){return a.slice(t,n).join("")}),u={name:"SyntaxTree",createArrayExpression:function(e){return{type:r.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:r.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:r.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:r.BlockStatement,body:e}},createBreakStatement:function(e){return{type:r.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:r.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:r.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:r.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:r.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:r.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:r.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:r.EmptyStatement}},createExpressionStatement:function(e){return{type:r.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,i){return{type:r.ForStatement,init:e,test:t,update:n,body:i}},createForInStatement:function(e,t,n){return{type:r.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,i){return{type:r.FunctionDeclaration,id:e,params:t,defaults:n,body:i,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,i){return{type:r.FunctionExpression,id:e,params:t,defaults:n,body:i,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:r.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:r.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:r.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:r.Literal,value:e.value,raw:b(e.range[0],e.range[1])}},createLogicalExpression:function(e,t,n){return{type:r.LogicalExpression,operator:e,left:t,right:n}},createMemberExpression:function(e,t,n){return{type:r.MemberExpression,computed:e==="[",object:t,property:n}},createNewExpression:function(e,t){return{type:r.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:r.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:r.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:r.Program,body:e}},createProperty:function(e,t,n){return{type:r.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:r.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:r.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:r.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:r.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:r.ThisExpression}},createThrowStatement:function(e){return{type:r.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,i){return{type:r.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:i}},createUnaryExpression:function(e,t){return e==="++"||e==="--"?{type:r.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:r.UnaryExpression,operator:e,argument:t}},createVariableDeclaration:function(e,t){return{type:r.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:r.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:r.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:r.WithStatement,object:e,body:t}}},e.version="1.1.0-dev",e.parse=mn,e.Syntax=function(){var e,t={};typeof Object.create=="function"&&(t=Object.create(null));for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return typeof Object.freeze=="function"&&Object.freeze(t),t}()}),function(){function n(e,t,n){function i(t){n[e.range[0]]=t;for(var r=e.range[0]+1;r<e.range[1];r++)n[r]=""}if(!e.range)return;e.parent=t,e.source=function(){return n.slice(e.range[0],e.range[1]).join("")};if(e.update&&typeof e.update=="object"){var r=e.update;Object.keys(r).forEach(function(e){i[e]=r[e]}),e.update=i}else e.update=i}var e=typeof window=="undefined"?require("esprima").parse:window.esprima.parse,t=function(t,r,i){typeof r=="function"&&(i=r,r={}),typeof t=="object"&&(r=t,t=r.source,delete r.source),t=t||r.source,r.range=!0,typeof t!="string"&&(t=String(t));var s=e(t,r),o={chunks:t.split(""),toString:function(){return o.chunks.join("")},inspect:function(){return o.toString()}},u=0;return function a(e,t){n(e,t,o.chunks),Object.keys(e).forEach(function(t){if(t==="parent")return;var r=e[t];Array.isArray(r)?r.forEach(function(t){t&&typeof t.type=="string"&&a(t,e)}):r&&typeof r.type=="string"&&(n(r,e,o.chunks),a(r,e))}),i(e)}(s,undefined),o};typeof window=="undefined"?module.exports=t:window.falafel=t}(),function(){var Box,DICT_FLAG,DictFlag,FunctionCondition,HIDDEN_VAR_PREFIX,Program,Rule,Tin,Var,Variable,backtrack,bind,bind_tins,boxit,compile,dir,extern,falafel,fulltest,g_hidden_var_counter,get_tin,gettest,internal,isHiddenVar,isarray,isbool,isfunc,isnum,isobj,isstr,isundef,isvaluetype,len,log,parse,parsetest,rollback,runtests,str,toJson,tryFunctionCondition,tryUnifyCondition,unboxit,unify,unifyfailtest,unifytest,_unify,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};log=function(e){return console.log(e)},dir=function(e){return console.dir(e)},len=function(e){return e.length},typeof exports=="undefined"&&(window.JSUnify={}),extern=function(e,t){return typeof exports=="undefined"?window.JSUnify[e]=t:exports[e]=t},typeof exports=="undefined"?window.JSUnify.internal={}:exports.internal={},internal=function(e,t){return typeof exports=="undefined"?window.JSUnify.internal[e]=t:exports.internal[e]=t},str=function(e){return typeof e=="undefined"?"undefined":e===null?"null":e.toString()},isundef=function(e){return typeof e=="undefined"},isbool=function(e){return typeof e=="boolean"},isarray=function(e){return e!=null&&Array.isArray(e)},isstr=function(e){return typeof e=="string"},isnum=function(e){return typeof e=="number"},isobj=function(e){return e!==null&&!isarray(e)&&typeof e=="object"},isvaluetype=function(e){return isbool(e)||isstr(e)||isnum(e)},isfunc=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},toJson=function(e){var t;return isarray(e)?"["+function(){var n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(toJson(t));return i}().join(",")+"]":e instanceof Box||e instanceof Tin||e instanceof Variable||e instanceof DictFlag?str(e):isobj(e)?"{"+function(){var n;n=[];for(t in e)n.push(t+":"+toJson(e[t]));return n}().join(",")+"}":isstr(e)?'"'+e+'"':str(e)},DictFlag=function(){function e(){}return e.prototype.toString=function(){return"new DictFlag()"},e}(),DICT_FLAG=new DictFlag,Box=function(){function e(e){if(!isvaluetype(e)&&e!==null)throw"Can only box value types, not "+toJson(e);this.value=e}return e.prototype.toString=function(){return"new Box("+toJson(this.value)+")"},e}(),g_hidden_var_counter=1,HIDDEN_VAR_PREFIX="__B3qgfO__",isHiddenVar=function(e){return e.slice(0,HIDDEN_VAR_PREFIX.length)===HIDDEN_VAR_PREFIX},Variable=function(){function e(e){e==="_"?(this.name=HIDDEN_VAR_PREFIX+g_hidden_var_counter,g_hidden_var_counter+=1):this.name=e}return e.prototype.isHiddenVar=function(){return isHiddenVar(this.name)},e.prototype.toString=function(){return"Var("+toJson(this.name)+")"},e}(),Var=function(e){return new Variable(e)},Tin=function(){function e(e,t,n){this.node=t!=null?t:null,this.varlist=isobj(n)?n:null,this.chainlength=1,this.name=e}return e.prototype.end_of_chain=function(){var t;t=this;while(t.varlist instanceof e)t=t.varlist;return t},e.prototype.isfree=function(){var e;return e=this.end_of_chain(),e.node===null&&e.varlist===null},e.prototype.isHiddenVar=function(){return isHiddenVar(this.name)},e.prototype.toString=function(){return"new Tin("+toJson(this.name)+", "+toJson(this.node)+", "+toJson(this.varlist)+")"},e.prototype.get=function(e){var t,n;n=this.varlist[e],n!==null&&n!==void 0&&(n=n.end_of_chain());if(n==null)throw"Variable "+e+" not in this tin";if(n.node==null||n.node===null)return new Var(n.name);if(n.node instanceof Box)return unboxit(n.node,n.varlist);if(n.node instanceof Var)return unboxit(n.node,n.varlist);if(isarray(n.node))return function(){var e,r,i,s;i=n.node,s=[];for(e=0,r=i.length;e<r;e++)t=i[e],s.push(unboxit(t,n.varlist));return s}();throw"Unknown type in get"},e.prototype.get_all=function(){var e,t;e={};for(t in this.varlist)isHiddenVar(t)||(e[t]=this.get(t));return e},e.prototype.unparse=function(){return unboxit(this.node)},e}(),boxit=function(e,t){var n,r,i;if(e instanceof Variable)return t!=null&&(t[e.name]=new Tin(e.name,null,null)),e;if(e instanceof Box)return e;if(isarray(e))return function(){var n,i,s;s=[];for(n=0,i=e.length;n<i;n++)r=e[n],s.push(boxit(r,t));return s}();if(isobj(e)){n=[];for(i in e)n.push([boxit(i,t),boxit(e[i],t)]);return n.push(DICT_FLAG),n.sort()}if(isvaluetype(e||e===null))return new Box(e);throw"Don't understand the type of elem"},unboxit=function(e,t){var n,r,i,s,o,u,a;if(isarray(e)){if(e[e.length-1]===DICT_FLAG){r=new Object,a=e.slice(0,e.length-1);for(o=0,u=a.length;o<u;o++)n=a[o],r[unboxit(n[0])]=unboxit(n[1]);return r}return function(){var t,n,r;r=[];for(t=0,n=e.length;t<n;t++)i=e[t],r.push(unboxit(i));return r}()}if(e instanceof Box)return e.value;if(e instanceof Variable){if(t!==void 0){try{s=get_tin(t,e)}catch(f){return e}return unboxit(s.node,s.varlist)}return e}throw"Unrecognized type '"+typeof e+"' in unboxit"},parse=function(e){var t,n;return t={},n=boxit(e,t),new Tin(null,n,t)},get_tin=function(e,t){if(!t instanceof Variable)throw"Node must be a Var to get_tin";if((e!=null?e[t.name]:void 0)!=null)return e[t.name];throw"Couldn't find node "+t.name+" in varlist "+e},bind=function(e,t,n,r){return e=e.end_of_chain(),e.isfree()?(e.node=t,e.varlist=n,r.push(function(){return e.node=null,e.varlist=null,e.chainlength=1})):!1},bind_tins=function(e,t,n){return!e.isfree()&&!t.isfree()?!1:e.isfree()&&!t.isfree()?bind(e,t.node,t.varlist,n):!e.isfree()&&t.isfree()?bind(t,e.node,e.varlist,n):t.chainlength<e.chainlength?(t.chainlength+=1,bind(t,null,e,n)):(e.chainlength+=1,bind(e,null,t,n))},_unify=function(e,t,n,r,i){var s,o,u,a,f,l,c;i==null&&(i=[]);if(e===void 0&&n===void 0)return!0;if(e===null&&n===null)return!0;if(e===null||n===null)return!1;if(e instanceof Variable&&n instanceof Variable){u=get_tin(t,e),a=get_tin(r,n);if(!bind_tins(u,a,i)&&!_unify(u.node,u.varlist,a.node,a.varlist,i))return!1}else if(e instanceof Variable){u=get_tin(t,e);if(!bind(u,n,r,i)&&!_unify(u.node,u.varlist,n,r,i))return!1}else if(n instanceof Variable){a=get_tin(r,n);if(!bind(a,e,t,i)&&!_unify(a.node,a.varlist,e,t,i))return!1}else{if(e instanceof Box&&n instanceof Box&&isvaluetype(e.value)&&isvaluetype(n.value))return e.value===n.value;if(isarray(e)&&isarray(n)){if(e.length!==n.length)return!1;c=function(){var t,n,r;r=[];for(o=t=0,n=e.length;0<=n?t<=n:t>=n;o=0<=n?++t:--t)r.push(o);return r}();for(f=0,l=c.length;f<l;f++){s=c[f];if(!_unify(e[s],t,n[s],r,i))return!1}}}return!0},unify=function(e,t,n){var r;return n==null&&(n=[]),r=!0,e=e instanceof Tin?e:parse(e),t=t instanceof Tin?t:parse(t),r=_unify(e.node,e.varlist,t.node,t.varlist,n),r===!1?null:[e,t]},rollback=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(t());return i},extern("parse",parse),extern("unify",unify),extern("Var",Var),internal("Tin",Tin),internal("Box",Box),internal("DictFlag",DictFlag),internal("toJson",toJson),internal("Variable",Variable),extern("rollback",rollback),Program=function(){function e(){this.rules=[]}return e.prototype.run=function(e){return e=new Rule(e),backtrack(e,this.rules)},e.prototype.rule=function(){var e,t;return t=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],this.rules.push(function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(Rule,[t].concat(__slice.call(e)),function(){})),this},e.prototype.iff=function(e){var t;if(this.rules.length===0)throw"iff is invalid in this context. A rule must be created first!";return t=this.rules[this.rules.length-1],t.iff(e),this},e.prototype.load=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.rules.push(t);return this},e}(),Rule=function(){function e(){var e,t,n,r,i;n=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],this.fact=n,this.tin=parse(n),this.conditions=[];for(r=0,i=t.length;r<i;r++)e=t[r],this.iff(e)}return e.prototype.iff=function(e){var t,n,r,i,s;isfunc(e)?e=new FunctionCondition(e):e=parse(e);if(this.conditions.length===0){t={},i=this.tin.varlist;for(n in i)r=i[n],t[n]=r}else t=this.conditions[0].varlist;s=e.varlist;for(n in s)r=s[n],t[n]===void 0&&(t[n]=r);return e.varlist=t,this.conditions.push(e),this},e}(),FunctionCondition=function(e){function t(e){this.func=e,t.__super__.constructor.call(this,null,null,{})}return __extends(t,e),t.prototype.bind=function(e,t){var n;return n=this.varlist[e].end_of_chain(),n.isfree()?(n.node=boxit(t,{}),!0):unboxit(n.node)===t?!0:!1},t}(Tin),backtrack=function(e,t){var n,r,i,s,o;e instanceof Rule&&(e=[e.tin]),n=e.pop();for(s=0,o=t.length;s<o;s++){i=t[s],n instanceof FunctionCondition?r=tryFunctionCondition(n,i,e,t):r=tryUnifyCondition(n,i,e,t);if(r!==null)return r}return e.push(n),null},tryUnifyCondition=function(e,t,n,r){var i,s,o,u,a;i=[];if(unify(e,t.tin,i)){t.conditions.reverse(),a=t.conditions;for(o=0,u=a.length;o<u;o++)s=a[o],n.push(s);t.conditions.reverse();if(n.length===0)return e;if(backtrack(n,r)!==null)return e}return rollback(i),null},tryFunctionCondition=function(e,t,n,r){return e.func(e)?e:null},extern("Rule",Rule),extern("Program",Program),falafel=typeof window!="undefined"&&window!==null&&window.falafel!=null?window.falafel:require("falafel"),compile=function(e){var t,n;return t=function(e){return e==null?!1:(e.ignore==null&&(e.ignore=e.type==="FunctionExpression"||e.type==="AssignmentExpression"?!0:t(e.parent)),e.ignore)},n=[],n.push("//This program was complied using JSUnify compiler version 1.0"),n.push("settings = {};"),n.push("var Var = JSUnify.Var;"),n.push("var p = new JSUnify.Program();"),n.push(falafel(e,function(e){var n,r,i;if(t(e))return;i=[],e.type==="CallExpression"&&(i.push("{"+e.callee.name+":["),i.push(function(){var t,r,i,s;i=e.arguments,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],s.push(n.source());return s}().join(",")),i.push("]}")),e.type==="Identifier"&&i.push('Var("'+e.name+'")'),e.type==="LogicalExpression"&&(i.push(e.left.source()),i.push(","),i.push(e.right.source())),e.type==="BinaryExpression"&&e.operator==="=="?(i.push(e.left.source()),i.push(","),i.push(e.right.source())):e.type==="BinaryExpression"&&(r={"+":"add","-":"sub","*":"mult","/":"div"},r[e.operator]!=null&&i.push('"'+r[e.operator]+'":['+e.left.source()+","+e.right.source()+"]")),e.type==="ExpressionStatement"&&e.expression.ignore!=null&&!e.expression.ignore&&(i.push("p.rule("),i.push(e.expression.source()),i.push(");")),i.length>0&&e.update(i.join(""))}).toString()),n.join("\n")},extern("compile",compile),parsetest=function(e){return deepEqual(parse(e).unparse(),e,"parse")},unifytest=function(e,t){return ok(unify(e,t),"unify")},unifyfailtest=function(e,t){return ok(!unify(e,t),"unify fail")},gettest=function(e,t){var n,r;r=[];for(n in t)t[n]instanceof Var?r.push(ok(e.get(n)instanceof Var,"get("+n+") = Var()")):r.push(deepEqual(e.get(n),t[n],"get("+n+") == "+toJson(t[n])));return r},fulltest=function(e,t,n,r){return parsetest(e),parsetest(t),e=parse(e),t=parse(t),unifytest(e,t),gettest(e,n),gettest(t,r)},runtests=function(){var prop;for(prop in JSUnify)window[prop]=JSUnify[prop];for(prop in JSUnify.internal)window[prop]=JSUnify.internal[prop];return module("full tests"),test("empty obj {} -> {}",function(){return fulltest({},{},{},{})}),test("null test [null] -> [null]",function(){return fulltest([null],[null],{},{})}),test("variable equal [X] -> [1]",function(){return fulltest([Var("a")],[1],{a:1},{})}),test("variable equal [X,X] -> [1,1]",function(){return fulltest([Var("a"),Var("a")],[1,1],{a:1},{})}),test("variable equal [[1,2,3]] -> [y]",function(){return fulltest([[1,2,3]],[Var("y")],{},{y:[1,2,3]})}),test("variable equal [[1,2,x],x] -> [y,3]",function(){return fulltest([[1,2,Var("x")],Var("x")],[Var("y"),3],{x:3},{y:[1,2,3]})}),test("unbound variable [y]->[x]",function(){return fulltest([Var("y")],[Var("x")],{y:Var("x")},{x:Var("x")})}),test("variable equal [1,X,X] -> [Z,Z,1]",function(){return fulltest([1,Var("X"),Var("X")],[Var("Z"),Var("Z"),1],{X:1},{Z:1})}),module("unify fail tests"),test("variable equal [X,X] -> [1,2]",function(){return unifyfailtest([Var("a"),Var("a")],[1,2])}),test("variable unequal [1,3,2] -> [Y,Y,2]",function(){return unifyfailtest([1,3,2],[Var("y"),Var("y"),2])}),test("variable unequal [1,X,X] -> [Z,Z,3]",function(){return unifyfailtest([1,Var("X"),Var("X")],[Var("Z"),Var("Z"),3])}),module("misc"),test("simple black box unify test",function(){return ok(unify({a:[1,2,3]},{a:[1,Var("b"),3]}))}),module("unify"),test("variable equal [X,2,X] -> [1,2,1]",function(){var e;return e=unify([Var("x"),2,Var("x")],[1,2,1]),ok(e),deepEqual(e[0].get_all(),{x:1})}),module("extract"),test("simple variable extraction test",function(){var e;return e=unify({a:[1,2,3]},{a:[1,Var("b"),3]}),ok(e[1].get("b")===2)}),test("extract all variables test",function(){var e;return e=unify({a:[1,2,3]},{a:[1,Var("b"),3]}),deepEqual(e[1].get_all(),{b:2})}),module("hidden variables"),test("create hidden variable",function(){return ok(Var("_").isHiddenVar())}),test("simple hidden variable [_,X] -> [1,2]",function(){return fulltest([Var("_"),Var("x")],[1,2],{x:2},{})}),test("multiple hidden variables [_,_,X] -> [1,2,3]",function(){return fulltest([Var("_"),Var("_"),Var("x")],[1,2,3],{x:3},{})}),test("[[1,_,3],[1,2,3]] -> [X,X]",function(){return fulltest([[1,Var("_"),3],[1,2,3]],[Var("x"),Var("x")],{},{x:[1,2,3]})}),module("rollback"),test("rollback successful unification",function(){var changes,cobj1,cobj2,obj1,obj2;return obj1=[1,2,3],obj2=[Var("A"),Var("B"),3],parsetest(obj1),parsetest(obj2),obj1=parse(obj1),obj2=parse(obj2),cobj1=eval(obj1.toString()),cobj2=eval(obj2.toString()),changes=[],ok(unify(obj1,obj2,changes),"unify"),rollback(changes),ok(obj1.toString()===cobj1.toString()),ok(obj2.toString()===cobj2.toString())})},extern("RunJSUnifyUnitTests",runtests),runtests=function(){return test("placeholder",function(){return ok(!0)}),module("Backtrack"),test("Snowy Chicago",function(){return ok((new Program).rule({snowy:Var("X")},{cold:[Var("X"),Var("Y")]},{rainy:[Var("X"),Var("Y")]}).rule({rainy:["cinci",1]}).rule({rainy:["chicago",1]}).rule({cold:["chicago",1]}).run({snowy:Var("P")}).get("P")==="chicago")}),test("Is Int",function(){var e;return e=(new Program).rule({number:4.4}).rule({number:9}).rule({"int":Var("X")},{number:Var("X")},function(e){var t;return t=e.get("X"),parseInt(t)===t}),ok(e.run({"int":Var("Y")}).get("Y")===9)}),test("N1 Is N-1",function(){var e;return e=(new Program).rule({number:12}).rule({minus:Var("N1")},{number:Var("N")},function(e){var t;return t=e.get("N"),e.bind("N1",t-1)}),ok(e.run({minus:Var("Q")}).get("Q")===11)}),test("Illegal rebind",function(){var e;return e=(new Program).rule({number:12}).rule({minus:Var("N1")},{number:Var("N")},function(e){var t;return t=e.get("N"),e.bind("N",t+1)}),ok(e.run({minus:Var("Q")})===null)}),test("Legal rebind - values equal",function(){var e;return e=(new Program).rule({number:12}).rule({minus:Var("N")},{number:Var("N")},function(e){var t;return t=e.get("N"),e.bind("N",t)}),ok(e.run({minus:Var("Q")}).get("Q")===12)}),test("Deriv 4 * x + 7 * x",function(){var e,t,n,r,i,s,o,u,a;return e=Var("C"),u=Var("X"),s=Var("U"),t=Var("DU"),o=Var("V"),n=Var("DV"),r=Var("N"),i=Var("N1"),a=(new Program).rule({deriv:[e,u,0]},function(e){return isnum(e.get("C"))}).rule({deriv:[u,u,1]}).rule({deriv:[{mult:[e,s]},u,{mult:[e,t]}]},function(e){return isnum(e.get("C"))},{deriv:[s,u,t]}).rule({deriv:[{mult:[s,o]},u,{add:[{mult:[s,n]},{mult:[o,t]}]}]},{deriv:[s,u,t]},{deriv:[o,u,n]}).rule({deriv:[{add:[s,o]},u,{add:[t,n]}]},{deriv:[s,u,t]},{deriv:[o,u,n]}).rule({deriv:[{sub:[s,o]},u,{sub:[t,n]}]},{deriv:[s,u,t]},{deriv:[o,u,n]}),console.log(a.run({deriv:[{add:[{mult:[7,"x"]},{mult:[4,"x"]}]},"x",Var("DR")]})),ok(!0)}),test("Family Tree",function(){var e,t,n;return n=[],n.push(new Rule({male:["james1"]})),n.push(new Rule({male:["charles2"]})),n.push(new Rule({male:["charles1"]})),n.push(new Rule({male:["james2"]})),n.push(new Rule({male:["george1"]})),n.push(new Rule({female:["catherine"]})),n.push(new Rule({female:["elizabeth"]})),n.push(new Rule({female:["sophia"]})),n.push(new Rule({parent:["charles1","james1"]})),n.push(new Rule({parent:["elizabeth","james1"]})),n.push(new Rule({parent:["charles2","charles1"]})),n.push(new Rule({parent:["catherine","charles1"]})),n.push(new Rule({parent:["james2","charles1"]})),n.push(new Rule({parent:["sophia","elizabeth"]})),n.push(new Rule({parent:["george1","sophia"]})),n.push(new Rule({parent:["george1","james1"]})),n.push(new Rule({father:[Var("Kid"),Var("Dad")]},{male:[Var("Dad")]},{parent:[Var("Kid"),Var("Dad")]})),n.push(new Rule({mother:[Var("Kid"),Var("Mom")]},{female:[Var("Mom")]},{parent:[Var("Kid"),Var("Mom")]})),e=(new Program).load(n),t=e.run({parent:["charles1","george1"]}),ok(t===null),t=e.run({parent:["elizabeth",Var("X")]}),ok(t!==null),ok(t.get("X")==="james1"),t=e.run({mother:["george1",Var("Mom")]}),ok(t!==null),ok(t.get("Mom")==="sophia"),t=e.run({father:["george1",Var("Dad")]}),ok(t!==null),ok(t.get("Dad")==="james1")})},extern("RunJSUnifyLangUnitTests",runtests)}.call(this)